[
  {
    "objectID": "mp02.html",
    "href": "mp02.html",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "",
    "text": "In an era where climate change is the villain and carbon footprints are the antagonist, public transit emerges as the unsung hero of sustainability. But just how green is your local transit agency? Welcome to our deep dive into transit emissions, where we crunch numbers, sip coffee ‚òï, and decide which agencies deserve a gold star ‚≠ê‚Äîand which deserve a strongly worded letter. üíå\n\n\n\nPublic Transit vs.¬†Cars: Does taking the bus really save the planet? üöçüåé\nState-Level CO‚ÇÇ Impact: Which states are leading the charge, and which are‚Ä¶ not? üèÜüí®\nMost Efficient Agencies: Who deserves a Green Medal, and who needs to rethink their fuel strategy? üèÖ\n\n\n\n\n\nBefore we scrape, let‚Äôs ensure we have the right R packages installed. But shh! ü§´ We‚Äôll keep it behind the scenes.\n\n\n\nFor the most part of the visualization and table i have used the same theme which is GTA IV style colors\n\n\nCode\nhighlight_color &lt;- \"#FF00C8\"  # Hot pink\naccent_color    &lt;- \"#00CFFF\"  # Neon blue\n\ntheme_gta &lt;- function(base_size = 11) {\n  theme_minimal(base_size = base_size) +\n    theme(\n      plot.background   = element_rect(fill = \"#000000\", color = NA),\n      panel.background  = element_rect(fill = \"#000000\", color = NA),\n      text              = element_text(color = \"white\"),\n      axis.text         = element_text(color = \"#CCCCCC\", size = 10),\n      axis.title        = element_text(color = \"white\"),\n      strip.text        = element_text(face = \"bold\", color = accent_color, size = 12),\n      plot.title        = element_text(color = highlight_color, size = 16, face = \"bold\"),\n      plot.subtitle     = element_text(color = \"#CCCCCC\", size = 11),\n      legend.background = element_rect(fill = \"#000000\"),\n      legend.text       = element_text(color = \"#DDDDDD\"),\n      legend.title      = element_text(color = \"#FFFFFF\", face = \"bold\")\n    )\n}\n\ngta_kable_style &lt;- function(kbl_table, caption = NULL, col2 = NULL) {\n  styled &lt;- kbl_table |&gt;\n    kable(format = \"html\", escape = FALSE, caption = caption) |&gt;\n    kable_styling(\n      bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n      full_width = FALSE, position = \"center\"\n    ) |&gt;\n    row_spec(0, bold = TRUE, background = highlight_color, color = \"white\")\n  \n  if (!is.null(col2)) {\n    styled &lt;- styled |&gt; column_spec(col2, color = \"black\", background = accent_color)\n  }\n  \n  return(styled)\n}\n\n\n\n\n\n\n\nCode\nget_eia_sep &lt;- function(state, abbr) {\n  state_formatted &lt;- str_to_lower(state) |&gt; str_replace_all(\"\\\\s\", \"\")\n  dir_name &lt;- file.path(\"data\", \"mp02\")\n  file_name &lt;- file.path(dir_name, state_formatted)\n  dir.create(dir_name, showWarnings = FALSE, recursive = TRUE)\n  \n  if (!file.exists(file_name)) {\n    BASE_URL &lt;- \"https://www.eia.gov\"\n    REQUEST &lt;- request(BASE_URL) |&gt; req_url_path(\"electricity\", \"state\", state_formatted)\n    RESPONSE &lt;- req_perform(REQUEST)\n    resp_check_status(RESPONSE)\n    writeLines(resp_body_string(RESPONSE), file_name)\n  }\n  \n  TABLE &lt;- read_html(file_name) |&gt;\n    html_element(\"table\") |&gt;\n    html_table() |&gt;\n    mutate(Item = str_to_lower(Item))\n  \n  if (\"U.S. rank\" %in% colnames(TABLE)) {\n    TABLE &lt;- TABLE |&gt; rename(Rank = `U.S. rank`)\n  }\n  \n  data.frame(\n    CO2_MWh               = TABLE |&gt; filter(Item == \"carbon dioxide (lbs/mwh)\") |&gt; pull(Value) |&gt; str_replace_all(\",\", \"\") |&gt; as.numeric(),\n    primary_source        = TABLE |&gt; filter(Item == \"primary energy source\") |&gt; pull(Rank),\n    electricity_price_MWh = TABLE |&gt; filter(Item == \"average retail price (cents/kwh)\") |&gt; pull(Value) |&gt; as.numeric() * 10,\n    generation_MWh        = TABLE |&gt; filter(Item == \"net generation (megawatthours)\") |&gt; pull(Value) |&gt; str_replace_all(\",\", \"\") |&gt; as.numeric(),\n    state                 = state,\n    abbreviation          = abbr\n  )\n}\n\nEIA_SEP_REPORT &lt;- map2(state.name, state.abb, get_eia_sep) |&gt; list_rbind()\n\nEIA_SEP_REPORT &lt;- EIA_SEP_REPORT %&gt;%\n  add_row(\n    state = \"District of Columbia\", abbreviation = \"DC\", CO2_MWh = 850,\n    primary_source = \"Natural Gas\", electricity_price_MWh = 130, generation_MWh = 500000\n  ) %&gt;%\n  add_row(\n    state = \"Puerto Rico\", abbreviation = \"PR\", CO2_MWh = 1800,\n    primary_source = \"Petroleum\", electricity_price_MWh = 200, generation_MWh = 400000\n  )"
  },
  {
    "objectID": "mp02.html#introduction",
    "href": "mp02.html#introduction",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "",
    "text": "In an era where climate change is the villain and carbon footprints are the antagonist, public transit emerges as the unsung hero of sustainability. But just how green is your local transit agency? Welcome to our deep dive into transit emissions, where we crunch numbers, sip coffee ‚òï, and decide which agencies deserve a gold star ‚≠ê‚Äîand which deserve a strongly worded letter. üíå\n\n\n\nPublic Transit vs.¬†Cars: Does taking the bus really save the planet? üöçüåé\nState-Level CO‚ÇÇ Impact: Which states are leading the charge, and which are‚Ä¶ not? üèÜüí®\nMost Efficient Agencies: Who deserves a Green Medal, and who needs to rethink their fuel strategy? üèÖ"
  },
  {
    "objectID": "mp02.html#data-loading",
    "href": "mp02.html#data-loading",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "",
    "text": "Before we scrape, let‚Äôs ensure we have the right R packages installed. But shh! ü§´ We‚Äôll keep it behind the scenes."
  },
  {
    "objectID": "mp02.html#gta-iv-theme",
    "href": "mp02.html#gta-iv-theme",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "",
    "text": "For the most part of the visualization and table i have used the same theme which is GTA IV style colors\n\n\nCode\nhighlight_color &lt;- \"#FF00C8\"  # Hot pink\naccent_color    &lt;- \"#00CFFF\"  # Neon blue\n\ntheme_gta &lt;- function(base_size = 11) {\n  theme_minimal(base_size = base_size) +\n    theme(\n      plot.background   = element_rect(fill = \"#000000\", color = NA),\n      panel.background  = element_rect(fill = \"#000000\", color = NA),\n      text              = element_text(color = \"white\"),\n      axis.text         = element_text(color = \"#CCCCCC\", size = 10),\n      axis.title        = element_text(color = \"white\"),\n      strip.text        = element_text(face = \"bold\", color = accent_color, size = 12),\n      plot.title        = element_text(color = highlight_color, size = 16, face = \"bold\"),\n      plot.subtitle     = element_text(color = \"#CCCCCC\", size = 11),\n      legend.background = element_rect(fill = \"#000000\"),\n      legend.text       = element_text(color = \"#DDDDDD\"),\n      legend.title      = element_text(color = \"#FFFFFF\", face = \"bold\")\n    )\n}\n\ngta_kable_style &lt;- function(kbl_table, caption = NULL, col2 = NULL) {\n  styled &lt;- kbl_table |&gt;\n    kable(format = \"html\", escape = FALSE, caption = caption) |&gt;\n    kable_styling(\n      bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n      full_width = FALSE, position = \"center\"\n    ) |&gt;\n    row_spec(0, bold = TRUE, background = highlight_color, color = \"white\")\n  \n  if (!is.null(col2)) {\n    styled &lt;- styled |&gt; column_spec(col2, color = \"black\", background = accent_color)\n  }\n  \n  return(styled)\n}"
  },
  {
    "objectID": "mp02.html#building-eia-state-profile-table",
    "href": "mp02.html#building-eia-state-profile-table",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "",
    "text": "Code\nget_eia_sep &lt;- function(state, abbr) {\n  state_formatted &lt;- str_to_lower(state) |&gt; str_replace_all(\"\\\\s\", \"\")\n  dir_name &lt;- file.path(\"data\", \"mp02\")\n  file_name &lt;- file.path(dir_name, state_formatted)\n  dir.create(dir_name, showWarnings = FALSE, recursive = TRUE)\n  \n  if (!file.exists(file_name)) {\n    BASE_URL &lt;- \"https://www.eia.gov\"\n    REQUEST &lt;- request(BASE_URL) |&gt; req_url_path(\"electricity\", \"state\", state_formatted)\n    RESPONSE &lt;- req_perform(REQUEST)\n    resp_check_status(RESPONSE)\n    writeLines(resp_body_string(RESPONSE), file_name)\n  }\n  \n  TABLE &lt;- read_html(file_name) |&gt;\n    html_element(\"table\") |&gt;\n    html_table() |&gt;\n    mutate(Item = str_to_lower(Item))\n  \n  if (\"U.S. rank\" %in% colnames(TABLE)) {\n    TABLE &lt;- TABLE |&gt; rename(Rank = `U.S. rank`)\n  }\n  \n  data.frame(\n    CO2_MWh               = TABLE |&gt; filter(Item == \"carbon dioxide (lbs/mwh)\") |&gt; pull(Value) |&gt; str_replace_all(\",\", \"\") |&gt; as.numeric(),\n    primary_source        = TABLE |&gt; filter(Item == \"primary energy source\") |&gt; pull(Rank),\n    electricity_price_MWh = TABLE |&gt; filter(Item == \"average retail price (cents/kwh)\") |&gt; pull(Value) |&gt; as.numeric() * 10,\n    generation_MWh        = TABLE |&gt; filter(Item == \"net generation (megawatthours)\") |&gt; pull(Value) |&gt; str_replace_all(\",\", \"\") |&gt; as.numeric(),\n    state                 = state,\n    abbreviation          = abbr\n  )\n}\n\nEIA_SEP_REPORT &lt;- map2(state.name, state.abb, get_eia_sep) |&gt; list_rbind()\n\nEIA_SEP_REPORT &lt;- EIA_SEP_REPORT %&gt;%\n  add_row(\n    state = \"District of Columbia\", abbreviation = \"DC\", CO2_MWh = 850,\n    primary_source = \"Natural Gas\", electricity_price_MWh = 130, generation_MWh = 500000\n  ) %&gt;%\n  add_row(\n    state = \"Puerto Rico\", abbreviation = \"PR\", CO2_MWh = 1800,\n    primary_source = \"Petroleum\", electricity_price_MWh = 200, generation_MWh = 400000\n  )"
  },
  {
    "objectID": "mp02.html#q1-which-state-charges-the-most-for-electricity",
    "href": "mp02.html#q1-which-state-charges-the-most-for-electricity",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "Q1: Which state charges the most for electricity? üí∏",
    "text": "Q1: Which state charges the most for electricity? üí∏\nElectricity isn‚Äôt cheap, but some states are definitely charging a shocking amount per megawatt-hour. Let‚Äôs find out who tops the list:\n\n\nCode\nmost_expensive_state &lt;- EIA_SEP_REPORT %&gt;%\n  arrange(desc(electricity_price_MWh)) %&gt;%\n  slice_head(n = 1) %&gt;%\n  select(state, electricity_price_MWh)\n\ngta_kable_style(most_expensive_state, caption = \"üí∞ The Most Expensive State for Electricity\")\n\n\n\n\nüí∞ The Most Expensive State for Electricity\n\n\nstate\nelectricity_price_MWh\n\n\n\n\nHawaii\n386\n\n\n\n\n\n\n\n\n\n\nCode\nmost_expensive_state_plot &lt;- EIA_SEP_REPORT %&gt;%\n  arrange(desc(electricity_price_MWh)) %&gt;%\n  slice_head(n = 5)\n\nggplot(most_expensive_state_plot, aes(x = reorder(state, electricity_price_MWh), y = electricity_price_MWh)) +\n  geom_col(fill = highlight_color, color = accent_color) +\n  coord_flip() +\n  labs(\n    title = \"üí∞ Top 5 States by Electricity Price\",\n    x = \"State\",\n    y = \"Price ($/MWh)\",\n    caption = \"Source: EIA State Profiles\"\n  ) +\n  theme_gta()\n\n\n\n\n\n\n\n\n\n\nFun fact: If you think your energy bill is bad, just wait until you see which state is breaking the bank. üí∞"
  },
  {
    "objectID": "mp02.html#q2-who-is-the-dirtiest-of-them-all",
    "href": "mp02.html#q2-who-is-the-dirtiest-of-them-all",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "Q2: Who is the dirtiest of them all? üå´Ô∏è",
    "text": "Q2: Who is the dirtiest of them all? üå´Ô∏è\nWhich state is the biggest polluter when it comes to electricity generation? Spoiler: It‚Äôs not where you‚Äôd expect.\n\n\nCode\ndirtiest_state &lt;- EIA_SEP_REPORT %&gt;%\n  arrange(desc(CO2_MWh)) %&gt;%\n  slice_head(n = 1) %&gt;%\n  select(state, CO2_MWh, primary_source)\n\ngta_kable_style(dirtiest_state, caption = \"üå´Ô∏è The Dirtiest State for Electricity\", col2 = 3)\n\n\n\n\nüå´Ô∏è The Dirtiest State for Electricity\n\n\nstate\nCO2_MWh\nprimary_source\n\n\n\n\nWest Virginia\n1925\nCoal\n\n\n\n\n\n\n\n\n\n\nCode\ntop_5_dirty &lt;- EIA_SEP_REPORT %&gt;%\n  arrange(desc(CO2_MWh)) %&gt;%\n  slice_head(n = 5)\n\nggplot(top_5_dirty, aes(x = reorder(state, CO2_MWh), y = CO2_MWh)) +\n  geom_col(fill = highlight_color, color = accent_color) +\n  coord_flip() +\n  labs(\n    title = \"üå´Ô∏è Top 5 Dirtiest States by CO‚ÇÇ Emissions\",\n    x = \"State\",\n    y = \"CO‚ÇÇ Emissions (lbs/MWh)\",\n    caption = \"Source: EIA State Profiles\"\n  ) +\n  theme_gta()\n\n\n\n\n\n\n\n\n\n\nShocking stat: This state produces more pounds of CO‚ÇÇ per megawatt-hour than anywhere else! üè≠"
  },
  {
    "objectID": "mp02.html#q3-whats-the-weighted-average-co‚ÇÇ-per-mwh",
    "href": "mp02.html#q3-whats-the-weighted-average-co‚ÇÇ-per-mwh",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "Q3: What‚Äôs the weighted average CO‚ÇÇ per MWh? ‚öñÔ∏è",
    "text": "Q3: What‚Äôs the weighted average CO‚ÇÇ per MWh? ‚öñÔ∏è\nLet‚Äôs compute the weighted average carbon emissions across all states.\n\n\nCode\nweighted_avg_CO2 &lt;- weighted.mean(EIA_SEP_REPORT$CO2_MWh, EIA_SEP_REPORT$generation_MWh, na.rm = TRUE)\n\nweighted_avg_df &lt;- data.frame(\n  Metric = \"Weighted Avg CO‚ÇÇ (lbs/MWh)\",\n  Value = round(weighted_avg_CO2, 2)\n)\n\ngta_kable_style(weighted_avg_df, caption = \"‚öñÔ∏è National Weighted Average CO‚ÇÇ per MWh\")\n\n\n\n\n‚öñÔ∏è National Weighted Average CO‚ÇÇ per MWh\n\n\nMetric\nValue\n\n\n\n\nWeighted Avg CO‚ÇÇ (lbs/MWh)\n805.47\n\n\n\n\n\n\n\n\n\nDid you know? The lower this number, the greener the electricity grid! üåø"
  },
  {
    "objectID": "mp02.html#q4-whats-the-rarest-primary-energy-source",
    "href": "mp02.html#q4-whats-the-rarest-primary-energy-source",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "Q4: What‚Äôs the rarest primary energy source? üîç",
    "text": "Q4: What‚Äôs the rarest primary energy source? üîç\nSome states use unique energy sources. Let‚Äôs see which is the rarest!\n\n\nCode\nrare_energy &lt;- EIA_SEP_REPORT %&gt;%\n  group_by(primary_source) %&gt;%\n  summarise(count = n(), avg_price = mean(electricity_price_MWh, na.rm = TRUE)) %&gt;%\n  arrange(count) %&gt;%\n  slice_head(n = 1)\n\ngta_kable_style(rare_energy, caption = \"üîç Rarest Primary Energy Source\", col2 = 3)\n\n\n\n\nüîç Rarest Primary Energy Source\n\n\nprimary_source\ncount\navg_price\n\n\n\n\nNatural Gas\n1\n130\n\n\n\n\n\n\n\n\n\nQ4b: Which states use this rare energy source? üåç\n\n\nCode\nstates_using_rare &lt;- EIA_SEP_REPORT %&gt;%\n  filter(primary_source == rare_energy$primary_source) %&gt;%\n  select(state, electricity_price_MWh)\n\ngta_kable_style(states_using_rare, caption = \"üåç States Using the Rarest Energy Source\")\n\n\n\n\nüåç States Using the Rarest Energy Source\n\n\nstate\nelectricity_price_MWh\n\n\n\n\nDistrict of Columbia\n130\n\n\n\n\n\n\n\n\n\nFun fact: Sometimes the rarest energy sources are also the most expensive! üí°"
  },
  {
    "objectID": "mp02.html#q5-how-much-cleaner-is-new-york-compared-to-texas-vs",
    "href": "mp02.html#q5-how-much-cleaner-is-new-york-compared-to-texas-vs",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "Q5: How much cleaner is New York compared to Texas? üçè vs ü§†",
    "text": "Q5: How much cleaner is New York compared to Texas? üçè vs ü§†\nNew York and Texas have wildly different energy landscapes. Let‚Äôs compare their emissions per megawatt-hour:\n\n\nCode\nny_co2 &lt;- EIA_SEP_REPORT %&gt;% filter(state == \"New York\") %&gt;% pull(CO2_MWh)\ntx_co2 &lt;- EIA_SEP_REPORT %&gt;% filter(state == \"Texas\") %&gt;% pull(CO2_MWh)\nclean_factor &lt;- tx_co2 / ny_co2\n\ncomparison_table &lt;- data.frame(\n  State = c(\"New York\", \"Texas\", \"Clean Factor (TX / NY)\"),\n  `CO2 per MWh` = c(ny_co2, tx_co2, round(clean_factor, 2))\n)\n\n# Table\ngta_kable_style(comparison_table, caption = \"üçè vs ü§† CO‚ÇÇ Emissions Comparison\")\n\n\n\n\nüçè vs ü§† CO‚ÇÇ Emissions Comparison\n\n\nState\nCO2.per.MWh\n\n\n\n\nNew York\n522.00\n\n\nTexas\n855.00\n\n\nClean Factor (TX / NY)\n1.64\n\n\n\n\n\n\n\n\n\n\nCode\n# Bar chart: NY vs TX only\nny_tx_df &lt;- comparison_table[1:2, ]\nny_tx_df$State &lt;- factor(ny_tx_df$State, levels = c(\"New York\", \"Texas\"))\n\nggplot(ny_tx_df, aes(x = State, y = CO2.per.MWh, fill = State)) +\n  geom_col(show.legend = FALSE, color = accent_color) +\n  scale_fill_manual(values = c(\"New York\" = highlight_color, \"Texas\" = highlight_color)) +\n  labs(\n    title = \"üçè vs ü§† CO‚ÇÇ Emissions: New York vs Texas\",\n    x = \"State\",\n    y = \"CO‚ÇÇ per MWh\",\n    caption = \"Source: EIA State Profiles\"\n  ) +\n  theme_gta()\n\n\n\n\n\n\n\n\n\n\nReality check: Texas emits r round(clean_factor, 2) times more CO‚ÇÇ per MWh than New York. Everything is bigger in Texas, including the carbon footprint! üè¥‚Äç‚ò†Ô∏è"
  },
  {
    "objectID": "mp02.html#conclusion",
    "href": "mp02.html#conclusion",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "Conclusion üèÅ",
    "text": "Conclusion üèÅ\nElectricity is not created equal across the U.S. Some states are climate champions üå±, while others‚Ä¶ well, they need a little work. But the good news? Change is happening! More states are adopting clean energy, and data like this helps us understand how to accelerate the transition to a greener future. üöÄ"
  },
  {
    "objectID": "mp02.html#fueling-up-for-transit-analysis",
    "href": "mp02.html#fueling-up-for-transit-analysis",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üì¢ Fueling Up for Transit Analysis! üöã‚ö°",
    "text": "üì¢ Fueling Up for Transit Analysis! üöã‚ö°"
  },
  {
    "objectID": "mp02.html#the-ntd-energy-data",
    "href": "mp02.html#the-ntd-energy-data",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üöÄ 1. The NTD Energy Data",
    "text": "üöÄ 1. The NTD Energy Data\n\n\nCode\nDATA_DIR &lt;- file.path(\"data\", \"mp02\")\ndir.create(DATA_DIR, showWarnings = FALSE, recursive = TRUE)\n\nNTD_ENERGY_FILE &lt;- file.path(DATA_DIR, \"2023_ntd_energy.xlsx\")\n\nif(!file.exists(NTD_ENERGY_FILE)){\n  DS &lt;- download.file(\n    \"https://www.transit.dot.gov/sites/fta.dot.gov/files/2024-10/2023%20Energy%20Consumption.xlsx\", \n    destfile = NTD_ENERGY_FILE, \n    method = \"curl\"\n  )\n  if(DS | (file.info(NTD_ENERGY_FILE)$size == 0)){\n    cat(\"I was unable to download the NTD Energy File. Please try again.\\n\")\n    stop(\"Download failed\")\n  }\n}\n\nNTD_ENERGY_RAW &lt;- read_xlsx(NTD_ENERGY_FILE)\n\nto_numeric_fill_0 &lt;- function(x) replace_na(as.numeric(x), 0)\n\nNTD_ENERGY &lt;- NTD_ENERGY_RAW |&gt; \n  select(-c(`Reporter Type`, `Reporting Module`, `Other Fuel`, `Other Fuel Description`)) |&gt; \n  mutate(across(-c(`Agency Name`, `Mode`, `TOS`), to_numeric_fill_0)) |&gt; \n  group_by(`NTD ID`, `Mode`, `Agency Name`) |&gt; \n  summarize(across(where(is.numeric), sum), .groups = \"keep\") |&gt; \n  mutate(ENERGY = sum(c_across(where(is.numeric)))) |&gt; \n  filter(ENERGY &gt; 0) |&gt; \n  select(-ENERGY) |&gt; \n  ungroup()"
  },
  {
    "objectID": "mp02.html#decoding-transit-modes",
    "href": "mp02.html#decoding-transit-modes",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üé≠ 2. Decoding Transit Modes",
    "text": "üé≠ 2. Decoding Transit Modes\nUnderstanding transit modes is crucial! Let‚Äôs transform those cryptic codes into human-friendly labels. üëÄ\n\n\nCode\nNTD_ENERGY &lt;- NTD_ENERGY |&gt; \n  mutate(Mode = case_when(\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferry Boat\",\n    Mode == \"MB\" ~ \"Motor Bus\",\n    Mode == \"SR\" ~ \"Streetcar\",\n    Mode == \"TB\" ~ \"Trolley Bus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"RB\" ~ \"Rapid Bus\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"MG\" ~ \"Monorail / Automated Guideway\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"AR\" ~ \"Aerial Tramway\",\n    Mode == \"TR\" ~ \"Hybrid Rail\",\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"YR\" ~ \"Hybrid Rail (Alternative)\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    TRUE ~ \"Unknown\"\n  ))\n\nNTD_ENERGY_LONG &lt;- NTD_ENERGY %&gt;%\n  pivot_longer(\n    cols = -c(`NTD ID`, `Agency Name`, Mode),\n    names_to = \"Fuel\",\n    values_to = \"Energy_Consumed\"\n  ) %&gt;%\n  filter(Energy_Consumed &gt; 0)\n\nsample_energy_table &lt;- NTD_ENERGY_LONG %&gt;% slice_sample(n = 10)\ngta_kable_style(sample_energy_table, caption = \"üîç Sample of NTD Energy (Long Format)\", col2 = 2)\n\n\n\n\nüîç Sample of NTD Energy (Long Format)\n\n\nNTD ID\nMode\nAgency Name\nFuel\nEnergy_Consumed\n\n\n\n\n30010\nDemand Response\nLehigh and Northampton Transportation Authority\nGasoline\n318682\n\n\n20010\nDemand Response\nDutchess County\nDiesel Fuel\n42979\n\n\n40063\nDemand Response\nBrevard Board of County Commissioners\nDiesel Fuel\n103909\n\n\n80004\nMotor Bus\nCity of Billings\nDiesel Fuel\n103036\n\n\n80003\nMotor Bus\nCity of Fargo\nDiesel Fuel\n176717\n\n\n60033\nDemand Response\nRock Region Metropolitan Transit Authority\nGasoline\n173376\n\n\n20080\nLight Rail\nNew Jersey Transit Corporation\nElectric Propulsion\n36636308\n\n\n40008\nCommuter Bus\nCity of Charlotte North Carolina\nDiesel Fuel\n200282\n\n\n30051\nDemand Response\nMontgomery County, Maryland\nDiesel Fuel\n22930\n\n\n7\nMotor Bus\nLane Transit District\nGasoline\n5806"
  },
  {
    "objectID": "mp02.html#conclusion-data-ready-for-analysis",
    "href": "mp02.html#conclusion-data-ready-for-analysis",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üéØ Conclusion: Data Ready for Analysis!",
    "text": "üéØ Conclusion: Data Ready for Analysis!\nüîπ We have successfully loaded, cleaned, and processed the NTD Energy dataset!\nüîπ Now, it‚Äôs primed and ready for deeper analysis‚Äîstay tuned for insights on emissions, efficiency, and green transit leaders! üåøüöé"
  },
  {
    "objectID": "mp02.html#ntd-service-data",
    "href": "mp02.html#ntd-service-data",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "NTD Service Data üöÄ",
    "text": "NTD Service Data üöÄ\n\n\nCode\nNTD_SERVICE &lt;- NTD_SERVICE_CLEAN %&gt;%\n  select(`NTD ID`, Agency, City, State, UPT, MILES) %&gt;%\n  filter(!is.na(UPT), !is.na(MILES), UPT &gt; 0, MILES &gt; 0)\n\nsample_service_table &lt;- head(NTD_SERVICE, 5)\ngta_kable_style(sample_service_table, caption = \"üöç Sample of Cleaned NTD Service Data\", col2 = 2)\n\n\n\n\nüöç Sample of Cleaned NTD Service Data\n\n\nNTD ID\nAgency\nCity\nState\nUPT\nMILES\n\n\n\n\n1\nKing County, dba: King County Metro\nSeattle\nWA\n78886848\n301530502\n\n\n2\nSpokane Transit Authority\nSpokane\nWA\n9403739\n46318134\n\n\n3\nPierce County Transportation Benefit Area Authority, dba: Pierce Transit\nLakewood\nWA\n6792245\n40362320\n\n\n5\nCity of Everett, dba: Everett Transit\nEverett\nWA\n1404970\n5193721\n\n\n6\nCity of Yakima, dba: Yakima Transit\nYakima\nWA\n646711\n3435365"
  },
  {
    "objectID": "mp02.html#unveiling-the-champions-of-public-transit",
    "href": "mp02.html#unveiling-the-champions-of-public-transit",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üèÜ Unveiling the Champions of Public Transit!",
    "text": "üèÜ Unveiling the Champions of Public Transit!\nPublic transportation: a noble effort to move the masses efficiently, reduce congestion, and save the planet. But how do different transit agencies measure up? Let‚Äôs crunch the numbers and find out who‚Äôs leading the charge! üöÜüí®"
  },
  {
    "objectID": "mp02.html#the-most-popular-transit-service-q1",
    "href": "mp02.html#the-most-popular-transit-service-q1",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üöÄ The Most Popular Transit Service (Q1)",
    "text": "üöÄ The Most Popular Transit Service (Q1)\nWhich agency moves the most people? We looked at Unlinked Passenger Trips (UPT) to determine the busiest transit service.\n\n\nCode\nmost_upt_service &lt;- NTD_SERVICE %&gt;%\n  arrange(desc(UPT)) %&gt;%\n  select(Agency, State, UPT) %&gt;%\n  head(1)\ngta_kable_style(most_upt_service, caption = \"üöç Transit Agency with the Most Riders\", col2 = 2)\n\n\n\n\nüöç Transit Agency with the Most Riders\n\n\nAgency\nState\nUPT\n\n\n\n\nMTA New York City Transit\nNY\n2632003044"
  },
  {
    "objectID": "mp02.html#nyc-subway-the-land-of-long-rides-q2",
    "href": "mp02.html#nyc-subway-the-land-of-long-rides-q2",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üóΩ NYC Subway: The Land of Long Rides (Q2)",
    "text": "üóΩ NYC Subway: The Land of Long Rides (Q2)\nLet‚Äôs calculate the average trip length for MTA New York City Transit (spoiler: it‚Äôs longer than your last relationship).\n\n\nCode\nmta_nyc_trip_length &lt;- NTD_SERVICE %&gt;%\n  filter(Agency == \"MTA New York City Transit\") %&gt;%\n  summarise(`Avg Trip Length (Miles)` = mean(MILES / UPT, na.rm = TRUE))\ngta_kable_style(mta_nyc_trip_length, caption = \"üóΩ Average Trip Length for MTA NYC Transit\")\n\n\n\n\nüóΩ Average Trip Length for MTA NYC Transit\n\n\nAvg Trip Length (Miles)\n\n\n\n\n3.644089"
  },
  {
    "objectID": "mp02.html#wheres-the-longest-ride-in-nyc-q3",
    "href": "mp02.html#wheres-the-longest-ride-in-nyc-q3",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üèôÔ∏è Where‚Äôs the Longest Ride in NYC? (Q3)",
    "text": "üèôÔ∏è Where‚Äôs the Longest Ride in NYC? (Q3)\nNot all NYC transit rides are equal! Which agency offers the longest average trip?\n\n\nCode\nnyc_longest_trip &lt;- NTD_SERVICE %&gt;%\n  filter(State == \"NY\") %&gt;%\n  mutate(avg_trip_length = MILES / UPT) %&gt;%\n  arrange(desc(avg_trip_length)) %&gt;%\n  select(Agency, City, avg_trip_length) %&gt;%\n  head(1)\ngta_kable_style(nyc_longest_trip, caption = \"üèôÔ∏è NYC Agency with Longest Avg Trip\", col2 = 3)\n\n\n\n\nüèôÔ∏è NYC Agency with Longest Avg Trip\n\n\nAgency\nCity\navg_trip_length\n\n\n\n\nHampton Jitney, Inc.\nCalverton\n92.4465"
  },
  {
    "objectID": "mp02.html#whos-driving-the-least-q4",
    "href": "mp02.html#whos-driving-the-least-q4",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üåé Who‚Äôs Driving the Least? (Q4)",
    "text": "üåé Who‚Äôs Driving the Least? (Q4)\nWe also looked at the state with the fewest total miles traveled on public transit. (Because not everyone has places to be.)\n\n\nCode\nfewest_miles_state &lt;- NTD_SERVICE %&gt;%\n  group_by(State) %&gt;%\n  summarise(`Total Transit Miles` = sum(MILES, na.rm = TRUE)) %&gt;%\n  arrange(`Total Transit Miles`) %&gt;%\n  head(1)\ngta_kable_style(fewest_miles_state, caption = \"üìâ State with the Fewest Transit Miles\", col2 = 2)\n\n\n\n\nüìâ State with the Fewest Transit Miles\n\n\nState\nTotal Transit Miles\n\n\n\n\nNH\n3749892"
  },
  {
    "objectID": "mp02.html#missing-states-alert-q5",
    "href": "mp02.html#missing-states-alert-q5",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "‚ùå Missing States Alert! (Q5)",
    "text": "‚ùå Missing States Alert! (Q5)\nAre there states missing from the National Transit Database (NTD)? Let‚Äôs find out! üö®\n\n\nCode\nall_states &lt;- data.frame(State = state.abb, Full_State_Name = state.name)\nmissing_states &lt;- all_states %&gt;%\n  anti_join(NTD_SERVICE, by = \"State\")\ngta_kable_style(missing_states, caption = \"üö® States Missing from NTD Service Data\", col2 = 2)\n\n\n\n\nüö® States Missing from NTD Service Data\n\n\nState\nFull_State_Name\n\n\n\n\nAZ\nArizona\n\n\nAR\nArkansas\n\n\nCA\nCalifornia\n\n\nCO\nColorado\n\n\nHI\nHawaii\n\n\nIA\nIowa\n\n\nKS\nKansas\n\n\nLA\nLouisiana\n\n\nMO\nMissouri\n\n\nMT\nMontana\n\n\nNE\nNebraska\n\n\nNV\nNevada\n\n\nNM\nNew Mexico\n\n\nND\nNorth Dakota\n\n\nOK\nOklahoma\n\n\nSD\nSouth Dakota\n\n\nTX\nTexas\n\n\nUT\nUtah\n\n\nWY\nWyoming"
  },
  {
    "objectID": "mp02.html#key-takeaways",
    "href": "mp02.html#key-takeaways",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üéØ Key Takeaways",
    "text": "üéØ Key Takeaways\n‚úÖ Most riders: The top agency moves millions! ‚úÖ NYC Subway riders take longer trips than your favorite TV show‚Äôs hiatus. ‚úÖ Smallest transit footprint: Some states barely use public transit. ‚úÖ Missing states: Should we be concerned? ü§î"
  },
  {
    "objectID": "mp02.html#eia-fuel-emission-factors-automated-scraping",
    "href": "mp02.html#eia-fuel-emission-factors-automated-scraping",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üß™ EIA Fuel Emission Factors: Automated Scraping",
    "text": "üß™ EIA Fuel Emission Factors: Automated Scraping\nTo calculate fuel-based emissions, we need to know how much CO‚ÇÇ (in kg) each gallon or unit of fuel releases.\nRather than entering values manually, we automated the process:\n\n\nCode\nurl &lt;- \"https://www.eia.gov/environment/emissions/co2_vol_mass.php\"\n\nco2_fuel_factors &lt;- read_html(url) %&gt;%\n  html_elements(\"table\") %&gt;%\n  .[[1]] %&gt;%\n  html_table() %&gt;%\n  select(Fuel = 1, kg_per_unit = 2) %&gt;%\n  mutate(\n    Fuel = str_trim(Fuel),\n    kg_per_unit = parse_number(kg_per_unit),\n    CO2_lb_per_unit = kg_per_unit * 2.20462  # Convert kg ‚Üí lbs\n  ) %&gt;%\n  filter(!is.na(kg_per_unit))  # Remove non-numeric rows\n\ndir.create(\"data/processed\", recursive = TRUE, showWarnings = FALSE)\n\nwrite_csv(co2_fuel_factors, \"data/processed/eia_co2_fuel_factors.csv\")\n\nco2_fuel_factors %&gt;%\n  slice_head(n = 10) %&gt;%\n  gta_kable_style(caption = \"üõ¢Ô∏è Sample of Scraped EIA Fuel Emission Factors\")\n\n\n\n\nüõ¢Ô∏è Sample of Scraped EIA Fuel Emission Factors\n\n\nFuel\nkg_per_unit\nCO2_lb_per_unit\n\n\n\n\nPropane\n12.68\n27.95458\n\n\nDiesel and Home Heating Fuel (Distillate Fuel Oil)\n22.45\n49.49372\n\n\nKerosene\n21.78\n48.01662\n\n\nCoal (All types)\n3826.88\n8436.81619\n\n\nNatural Gas\n120.85\n266.42833\n\n\nFinished Motor Gasoline\n18.73\n41.29253\n\n\nMotor Gasolinea\n20.86\n45.98837\n\n\nResidual Heating Fuel (Businesses only)\n24.78\n54.63048\n\n\nJet Fuel\n21.50\n47.39933\n\n\nAviation Gas\n18.32\n40.38864"
  },
  {
    "objectID": "mp02.html#final-dataset-emissions-overview",
    "href": "mp02.html#final-dataset-emissions-overview",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üì¢ Final Dataset: Emissions Overview",
    "text": "üì¢ Final Dataset: Emissions Overview\nLet‚Äôs take a look at the final cleaned dataset containing CO‚ÇÇ emissions data across transit agencies.\n\n\nCode\nwrite_rds(NTD_ENERGY_LONG, \"data/mp02/NTD_ENERGY_LONG.rds\")\nwrite_rds(NTD_SERVICE, \"data/mp02/NTD_SERVICE_CLEAN.rds\")\nwrite_rds(EIA_SEP_REPORT, \"data/mp02/EIA_SEP_REPORT.rds\")\n\nEIA_FUELS &lt;- read_csv(\"data/processed/eia_co2_fuel_factors.csv\") |&gt; \n  add_row(Fuel = \"Hydrogen\", kg_per_unit = 0)\n\nfuel_mapping &lt;- tribble(\n  ~Fuel,                      ~EIA_Fuel,\n  \"Diesel Fuel\",              \"Diesel and Home Heating Fuel (Distillate Fuel Oil)\",\n  \"Gasoline\",                 \"Finished Motor Gasoline\",\n  \"Liquified Petroleum Gas\", \"Propane\",\n  \"Electric Battery\",         NA_character_,\n  \"Electric Propulsion\",      NA_character_,\n  \"C Natural Gas\",            \"Natural Gas\",\n  \"Liquified Nat Gas\",        \"Natural Gas\",\n  \"Bio-Diesel\",               \"Diesel and Home Heating Fuel (Distillate Fuel Oil)\",\n  \"Hydrogen\",                 \"Hydrogen\"\n)\n\nanti_join(fuel_mapping, EIA_FUELS, by = c(\"EIA_Fuel\" = \"Fuel\"))\n\n\n# A tibble: 2 √ó 2\n  Fuel                EIA_Fuel\n  &lt;chr&gt;               &lt;chr&gt;   \n1 Electric Battery    &lt;NA&gt;    \n2 Electric Propulsion &lt;NA&gt;    \n\n\nCode\nemissions_data &lt;- NTD_ENERGY_LONG %&gt;%\n  left_join(NTD_SERVICE, by = \"NTD ID\") %&gt;%\n  left_join(fuel_mapping, by = \"Fuel\") %&gt;%\n  left_join(EIA_FUELS, by = c(\"EIA_Fuel\" = \"Fuel\")) %&gt;%\n  left_join(EIA_SEP_REPORT %&gt;% select(abbreviation, CO2_MWh),\n            by = c(\"State\" = \"abbreviation\")) %&gt;%\n  mutate(\n    Emissions_kg = case_when(\n      Fuel %in% c(\"Electric Battery\", \"Electric Propulsion\") & !is.na(CO2_MWh) ~ Energy_Consumed * CO2_MWh / 2.20462,\n      !is.na(kg_per_unit) ~ Energy_Consumed * kg_per_unit,\n      TRUE ~ 0\n    ),\n    Emissions_lb = Emissions_kg * 2.20462\n  ) %&gt;%\n  filter(!is.na(State)) %&gt;%\n  mutate(\n    CO2_per_MILE = Emissions_kg / MILES,\n    Total_CO2 = Emissions_kg,\n    CO2_Electric = ifelse(Fuel %in% c(\"Electric Battery\", \"Electric Propulsion\"), Emissions_kg, 0),\n    Agency_Size = case_when(\n      UPT &gt; 100000000 ~ \"Large\",\n      UPT &gt; 1000000   ~ \"Medium\",\n      TRUE              ~ \"Small\"\n    )\n  )\n\nfinal_emissions_table &lt;- emissions_data %&gt;%\n  group_by(Agency = `Agency Name`, Mode, Fuel, State) %&gt;%\n  summarise(\n    Total_Energy = sum(Energy_Consumed, na.rm = TRUE),\n    Total_Emissions_kg = sum(Emissions_kg, na.rm = TRUE),\n    Total_Emissions_lb = sum(Emissions_lb, na.rm = TRUE),\n    UPT = sum(UPT, na.rm = TRUE),\n    MILES = sum(MILES, na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  arrange(desc(Total_Emissions_kg))\n\n\ndir.create(\"outputs\", showWarnings = FALSE)\nwrite_csv(final_emissions_table, \"outputs/final_emissions_table.csv\")\nsaveRDS(final_emissions_table, \"data/processed/final_emissions_table.rds\")\n\n\ntop_emitters &lt;- final_emissions_table %&gt;%\n  slice_max(Total_Emissions_kg, n = 10) %&gt;%\n  select(Agency, Mode, Fuel, Total_Energy, Total_Emissions_kg, UPT, MILES)\n\ngta_kable_style(top_emitters, caption = \"üî• Top 10 Emitting Agencies by Fuel\", col2 = 2)\n\n\n\n\nüî• Top 10 Emitting Agencies by Fuel\n\n\nAgency\nMode\nFuel\nTotal_Energy\nTotal_Emissions_kg\nUPT\nMILES\n\n\n\n\nMTA New York City Transit\nHeavy Rail\nElectric Propulsion\n1546269600\n366118755704\n2632003044\n9591253658\n\n\nWashington Metropolitan Area Transit Authority\nHeavy Rail\nElectric Propulsion\n499328277\n192518001039\n231023784\n912604948\n\n\nMTA Long Island Rail Road\nCommuter Rail\nElectric Propulsion\n548190400\n129798055356\n83835706\n2033685836\n\n\nMetro-North Commuter Railroad Company, dba: MTA Metro-North Railroad\nCommuter Rail\nElectric Propulsion\n405036564\n95902734443\n66645285\n1150894931\n\n\nNew Jersey Transit Corporation\nCommuter Rail\nElectric Propulsion\n365911929\n85975079253\n198590133\n2314384007\n\n\nChicago Transit Authority\nHeavy Rail\nElectric Propulsion\n339757455\n80446240853\n279146501\n1090677628\n\n\nSoutheastern Pennsylvania Transportation Authority\nCommuter Rail\nElectric Propulsion\n204899285\n60876265150\n197264920\n834809485\n\n\nMassachusetts Bay Transportation Authority\nHeavy Rail\nElectric Propulsion\n135803120\n56856183723\n234975556\n1103417623\n\n\nSoutheastern Pennsylvania Transportation Authority\nHeavy Rail\nElectric Propulsion\n115833983\n34414665051\n197264920\n834809485\n\n\nMetropolitan Atlanta Rapid Transit Authority\nHeavy Rail\nElectric Propulsion\n77059623\n25621061071\n62093037\n352115956"
  },
  {
    "objectID": "mp02.html#conclusion-automating-for-a-greener-future",
    "href": "mp02.html#conclusion-automating-for-a-greener-future",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üéâ Conclusion: Automating for a Greener Future",
    "text": "üéâ Conclusion: Automating for a Greener Future\nBy automating the data collection, cleaning, and analysis, we enable cities and policymakers to make informed and data-driven decisions towards a greener future! üöÄ"
  },
  {
    "objectID": "mp02.html#task-6-normalizing-emissions-the-great-equalizer",
    "href": "mp02.html#task-6-normalizing-emissions-the-great-equalizer",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üßÆ Task 6: Normalizing Emissions ‚Äî The Great Equalizer",
    "text": "üßÆ Task 6: Normalizing Emissions ‚Äî The Great Equalizer\nWelcome back to Green Transit Awards‚Ñ¢, where transit agencies battle it out for climate glory. Now that we‚Äôve calculated total emissions like responsible climate nerds üåç, it‚Äôs time to normalize that data and level the playing field. Because let‚Äôs be honest:\n‚ÄúSaying a giant city emits more CO‚ÇÇ than a town with three buses is like saying King Kong eats more bananas than a hamster.‚Äù\n\nüéØ Objective\nWe‚Äôre diving deep into emissions per rider (UPT) and emissions per passenger mile to uncover who‚Äôs doing the most with the least carbon. It‚Äôs not about how big you are ‚Äî it‚Äôs how efficient you roll. üöåüí®\n‚öñÔ∏è How We Did It: Normalization Explained\nUsing our previously calculated final_emissions_table, we grouped the data by Agency + State and summed the following:\nüßÆ Total_Emissions_kg: Total kilograms of CO‚ÇÇ emitted\nüö∂ Total_UPT: Unlinked Passenger Trips\nüõ£Ô∏è Total_MILES: Total Passenger Miles\nWe then calculated two key metrics:\nkg_per_UPT = Emissions per rider (carbon cost of a ride)\nkg_per_Mile = Emissions per mile (carbon cost of distance)\nThese are our battle stats ‚Äî the CO‚ÇÇ K/D ratio of transit.\n\n\nCode\nnormalized_emissions &lt;- final_emissions_table %&gt;%\n  group_by(Agency, State) %&gt;%\n  summarise(\n    Total_Emissions_kg = sum(Total_Emissions_kg, na.rm = TRUE),\n    Total_UPT = sum(UPT, na.rm = TRUE),\n    Total_MILES = sum(MILES, na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  filter(Total_UPT &gt; 0, Total_MILES &gt; 0) %&gt;%\n  mutate(\n    kg_per_UPT = Total_Emissions_kg / Total_UPT,\n    kg_per_Mile = Total_Emissions_kg / Total_MILES\n  )"
  },
  {
    "objectID": "mp02.html#agency-size-categories",
    "href": "mp02.html#agency-size-categories",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üè∑Ô∏è Agency Size Categories",
    "text": "üè∑Ô∏è Agency Size Categories\nBecause it‚Äôs not fair to compare the MTA to a trolley in a beach town, we grouped agencies by ridership size:\nSmall: &lt; 1 million UPT/year\nMedium: 1‚Äì10 million UPT\nLarge: 10+ million UPT\n\n\nCode\nnormalized_emissions &lt;- normalized_emissions %&gt;%\n  mutate(\n    size = case_when(\n      Total_UPT &lt; 1e6 ~ \"Small\",\n      Total_UPT &lt; 10e6 ~ \"Medium\",\n      TRUE ~ \"Large\"\n    )\n  )\n\n\nüèÜ Top 10 Most Efficient Agencies (Per Rider)\nThese agencies produce the lowest emissions per person. They move you cleanly ‚Äî like a ninja on a carbon diet. ü•∑üçÉ\n\n\nCode\nnormalized_emissions %&gt;%\n  arrange(kg_per_UPT) %&gt;%\n  slice_head(n = 10) %&gt;%\n  select(Agency, State, Total_Emissions_kg, Total_UPT, kg_per_UPT, size) %&gt;%\n  gta_kable_style(caption = \"üí® Most Efficient Agencies (Per UPT)\")\n\n\n\n\nüí® Most Efficient Agencies (Per UPT)\n\n\nAgency\nState\nTotal_Emissions_kg\nTotal_UPT\nkg_per_UPT\nsize\n\n\n\n\nChampaign-Urbana Mass Transit District\nIL\n14765944.8\n34292424\n0.4305891\nLarge\n\n\nCity of Fayetteville\nNC\n6923513.6\n10978365\n0.6306507\nLarge\n\n\nGreater Bridgeport Transit Authority\nCT\n13536667.3\n21066596\n0.6425655\nLarge\n\n\nAnn Arbor Area Transportation Authority\nMI\n22334550.2\n28083390\n0.7952940\nLarge\n\n\nIntercity Transit\nWA\n18992023.2\n23393970\n0.8118341\nLarge\n\n\nGreen Mountain Transit Authority\nVT\n12069974.5\n14734848\n0.8191448\nLarge\n\n\nCity of Fort Lauderdale\nFL\n542367.1\n656373\n0.8263093\nSmall\n\n\nMs Coast Transportation Authority\nMS\n5269864.7\n6010512\n0.8767747\nMedium\n\n\nCity of Harrisonburg\nVA\n4035732.4\n4568238\n0.8834331\nMedium\n\n\nWorcester Regional Transit Authority\nMA\n11222372.1\n12400287\n0.9050091\nLarge\n\n\n\n\n\n\n\n\nüöÄ Top 10 Most Efficient Agencies (Per Mile)\nThese champs move people farther with less carbon. Imagine being able to cross the city on 2 grams of CO‚ÇÇ. These agencies get close. üåéüõ£Ô∏è\n\n\nCode\nnormalized_emissions %&gt;%\n  arrange(kg_per_Mile) %&gt;%\n  slice_head(n = 10) %&gt;%\n  select(Agency, State, Total_Emissions_kg, Total_MILES, kg_per_Mile, size) %&gt;%\n  gta_kable_style(caption = \"üõ£Ô∏è Most Efficient Agencies (Per Passenger Mile)\")\n\n\n\n\nüõ£Ô∏è Most Efficient Agencies (Per Passenger Mile)\n\n\nAgency\nState\nTotal_Emissions_kg\nTotal_MILES\nkg_per_Mile\nsize\n\n\n\n\nMs Coast Transportation Authority\nMS\n5269865\n55688752\n0.0946307\nMedium\n\n\nSnohomish County Public Transportation Benefit Area Corporation\nWA\n56003868\n471189320\n0.1188564\nLarge\n\n\nIntercity Transit\nWA\n18992023\n147168660\n0.1290494\nLarge\n\n\nThe Tri-County Council for the Lower Eastern Shore of Maryland\nMD\n4484579\n30017210\n0.1494003\nMedium\n\n\nCity of Fayetteville\nNC\n6923514\n45495870\n0.1521789\nLarge\n\n\nAnn Arbor Area Transportation Authority\nMI\n22334550\n141721440\n0.1575947\nLarge\n\n\nPotomac and Rappahannock Transportation Commission\nVA\n34575352\n219347540\n0.1576282\nMedium\n\n\nAdirondack Transit Lines, Inc.\nNY\n5340182\n31065245\n0.1719021\nSmall\n\n\nCentral Oregon Intergovernmental Council\nOR\n3151714\n17603085\n0.1790433\nMedium\n\n\nCentral Midlands Regional Transportation Authority\nSC\n14269704\n74085468\n0.1926114\nLarge"
  },
  {
    "objectID": "mp02.html#gta-iv-green-transit-awards-the-ceremony",
    "href": "mp02.html#gta-iv-green-transit-awards-the-ceremony",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üö¶ GTA IV Green Transit Awards: The Ceremony üé§",
    "text": "üö¶ GTA IV Green Transit Awards: The Ceremony üé§\nWelcome to Liberty City‚Äôs version of the Oscars ‚Äî but for public transit.\nForget tuxedos, we‚Äôre handing out awards to transit agencies based on emissions data ‚Äî and maybe a little judgment. üòè\nWe‚Äôve split the awards into four hard-hitting GTA-style categories:\n\nüèÖ Greenest Agency (Lowest CO‚ÇÇ per mile)\n\nüöóüí® Most Emissions Avoided (vs your cousin‚Äôs gas guzzler)\n\nüîå Electrification Excellence (because batteries ‚â† boring)\n\nüíÄ The ‚ÄúYikes‚Äù Award (highest CO‚ÇÇ/mile ‚Äî yeah, we‚Äôre looking at you)\n\nLet‚Äôs break it down.\n\nüèÖ Greenest Transit Agencies by Size\nThese agencies didn‚Äôt just go green ‚Äî they went full Claude Speed on carbon. We grouped them by rider size to keep it fair, then crowned the ones with the lowest CO‚ÇÇ per passenger mile.\n\n\nCode\ngreenest_agency_by_size &lt;- emissions_data |&gt; \n  filter(!is.na(CO2_per_MILE)) |&gt; \n  group_by(Agency_Size) |&gt; \n  arrange(CO2_per_MILE) |&gt; \n  slice(1) |&gt; \n  ungroup() |&gt; \n  select(Agency_Size, Agency, State, CO2_per_MILE)\n\ngta_kable_style(greenest_agency_by_size, caption = \"üèÖ Greenest Transit Agencies by Size (Lowest CO‚ÇÇ per Mile)\")\n\n\n\n\nüèÖ Greenest Transit Agencies by Size (Lowest CO‚ÇÇ per Mile)\n\n\nAgency_Size\nAgency\nState\nCO2_per_MILE\n\n\n\n\nLarge\nMTA New York City Transit\nNY\n0.000046\n\n\nMedium\nStark Area Regional Transit Authority\nOH\n0.000000\n\n\nSmall\nCity of Appleton, dba: Valley Transit\nWI\n0.000438\n\n\n\n\n\n\n\n\n\n\nCode\navg_co2_per_mile &lt;- mean(emissions_data$CO2_per_MILE, na.rm = TRUE)\n\ngreenest_agency_by_size &lt;- emissions_data %&gt;%\n  filter(!is.na(CO2_per_MILE)) %&gt;%\n  group_by(Agency_Size) %&gt;%\n  arrange(CO2_per_MILE) %&gt;%\n  slice(1) %&gt;%\n  ungroup() %&gt;%\n  select(Agency_Size, Agency, State, CO2_per_MILE)\n\ngreenest_agency_by_size &lt;- greenest_agency_by_size %&gt;%\n  mutate(Label = ifelse(CO2_per_MILE &lt; 0.001, \"&lt; 0.001 kg\", paste0(round(CO2_per_MILE, 3), \" kg\")))\n\nggplot(greenest_agency_by_size, aes(x = reorder(Agency, CO2_per_MILE), y = CO2_per_MILE)) +\n  geom_segment(aes(xend = Agency, y = 0, yend = CO2_per_MILE), color = accent_color, size = 1.5) +\n  geom_point(aes(color = Agency_Size), size = 6) +\n  geom_text(aes(label = Label), \n            hjust = -0.3, color = \"white\", size = 4, fontface = \"bold\") +\n  coord_flip() +\n  labs(\n    title = \"üåø Clean Ride Royalty\",\n    subtitle = \"Top Greenest Transit Agencies by Size (CO‚ÇÇ per Passenger Mile)\",\n    x = NULL, y = \"CO‚ÇÇ per Mile (kg)\"\n  ) +\n  scale_color_manual(values = c(\"Small\" = highlight_color, \"Medium\" = accent_color, \"Large\" = \"#00FF95\")) +\n  theme_gta() +\n  theme(\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor.y = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n\n\nüöóüí® Most Emissions Avoided (vs Private Cars)\nIf your agency saves more emissions than a weekend traffic jam in Algonquin, you get on this list. We modeled private car emissions and compared transit‚Äôs sweet, sweet gains.\n\n\nCode\nemissions_avoided_by_size &lt;- emissions_data |&gt; \n  mutate(\n    Gallons_Used = MILES / 25,\n    CO2_if_cars = Gallons_Used * 19.6,\n    Emissions_Avoided = CO2_if_cars - Total_CO2\n  ) |&gt;\n  group_by(Agency_Size) |&gt; \n  arrange(desc(Emissions_Avoided)) |&gt; \n  slice(1) |&gt; \n  ungroup() |&gt; \n  select(Agency_Size, Agency, State, Emissions_Avoided)\n\ngta_kable_style(emissions_avoided_by_size, caption = \"üöóüí® Most Emissions Avoided by Transit Agencies (By Size)\")\n\n\n\n\nüöóüí® Most Emissions Avoided by Transit Agencies (By Size)\n\n\nAgency_Size\nAgency\nState\nEmissions_Avoided\n\n\n\n\nLarge\nMTA New York City Transit\nNY\n7519101389\n\n\nMedium\nMTA Long Island Rail Road\nNY\n1435350705\n\n\nSmall\nHampton Jitney, Inc.\nNY\n28931084\n\n\n\n\n\n\n\n\n\n\nCode\nggplot(emissions_avoided_by_size, aes(x = Agency, y = 1, size = Emissions_Avoided, fill = Agency_Size)) +\n  geom_point(shape = 21, color = \"white\", stroke = 1.5) +\n  scale_size(range = c(15, 50), name = \"Emissions Avoided (kg)\") +\n  scale_fill_manual(values = c(\"Large\" = highlight_color, \"Medium\" = accent_color, \"Small\" = \"#00FF95\")) +\n  labs(\n    title = \"üåê Emissions Avoided by Transit Agencies\",\n    subtitle = \"Each bubble scaled by kg of CO‚ÇÇ avoided\",\n    x = NULL, y = NULL\n  ) +\n  theme_gta() +\n  geom_text(aes(label = paste0(round(Emissions_Avoided / 1e6, 1), \"M kg\")), \n            vjust = -4, size = 4, color = \"white\")\n\n\n\n\n\n\n\n\n\n\n\nüîå Electrification Excellence (By Size)\nSome agencies plugged in and never looked back. We honored those who rely most on electric power for CO‚ÇÇ savings. Liberty City salutes your socket game. ‚ö°\n\n\nCode\nelectrification_award_by_size &lt;- emissions_data |&gt; \n  mutate(Electric_Share = CO2_Electric / Total_CO2) |&gt; \n  filter(!is.na(Electric_Share)) |&gt; \n  group_by(Agency_Size) |&gt; \n  arrange(desc(Electric_Share)) |&gt; \n  slice(1) |&gt; \n  ungroup() |&gt; \n  select(Agency_Size, Agency, State, Electric_Share)\n\ngta_kable_style(electrification_award_by_size, caption = \"üîå Electrification Excellence (By Size)\")\n\n\n\n\nüîå Electrification Excellence (By Size)\n\n\nAgency_Size\nAgency\nState\nElectric_Share\n\n\n\n\nLarge\nMassachusetts Bay Transportation Authority\nMA\n1\n\n\nMedium\nKing County, dba: King County Metro\nWA\n1\n\n\nSmall\nCity of Wilsonville, dba: South Metro Area Regional Transit\nOR\n1\n\n\n\n\n\n\n\n\n\n\nCode\nelectrification_top5 &lt;- emissions_data %&gt;%\n  mutate(\n    Electric_Share = CO2_Electric / Total_CO2,\n    Electric_Pct = round(100 * Electric_Share, 1)\n  ) %&gt;%\n  filter(!is.na(Electric_Share)) %&gt;%\n  group_by(Agency_Size) %&gt;%\n  slice_max(order_by = Electric_Share, n = 5, with_ties = FALSE) %&gt;%\n  ungroup()\n\nlibrary(forcats)\n\nelectrification_top5_clean &lt;- electrification_top5 %&gt;%\n  mutate(\n    Short_Label = Agency %&gt;%\n      str_replace_all(\"(?i)dba.*\", \"\") %&gt;%\n      str_replace_all(\"Transit Authority\", \"TA\") %&gt;%\n      str_replace_all(\"Transportation\", \"Transp.\") %&gt;%\n      str_replace_all(\"Department of\", \"Dept.\") %&gt;%\n      str_replace_all(\"University\", \"Univ.\") %&gt;%\n      str_replace_all(\"City of \", \"\") %&gt;%\n      str_squish()\n  ) %&gt;%\n  mutate(Polar_Label = paste0(str_wrap(paste0(Short_Label, \" (\", State, \")\"), width = 18)))\n\n\n# ‚îÄ‚îÄ ü™Ñ Compact lollipop chart grouped by size ‚îÄ‚îÄ\nggplot(electrification_top5_clean, aes(x = Electric_Pct, y = fct_reorder(Short_Label, Electric_Pct))) +\n  geom_segment(aes(x = 0, xend = Electric_Pct, yend = fct_reorder(Short_Label, Electric_Pct), color = Agency_Size),\n               linewidth = 2) +\n  geom_point(aes(color = Agency_Size), size = 5) +\n  geom_text(aes(label = paste0(Electric_Pct, \"%\")), \n            hjust = -0.3, size = 3.5, fontface = \"bold\", color = \"white\") +\n  facet_wrap(~Agency_Size, scales = \"free_y\", ncol = 1) +\n  scale_color_manual(values = c(\"Large\" = highlight_color, \"Medium\" = accent_color, \"Small\" = \"#00FF95\")) +\n  labs(\n    title = \"‚ö° Electrification Elite: GTA IV Edition\",\n    subtitle = \"Top 5 Transit Agencies by Electric CO‚ÇÇ Share (Grouped by Agency Size)\",\n    x = \"Electric Share of Emissions (%)\", y = NULL\n  ) +\n  theme_gta() +\n  theme(\n    strip.text = element_text(face = \"bold\", color = \"white\", size = 12),\n    plot.title = element_text(color = highlight_color, size = 18, face = \"bold\"),\n    plot.subtitle = element_text(color = \"white\", size = 12),\n    axis.text.y = element_text(size = 8, color = \"white\"),\n    legend.position = \"none\"\n  ) +\n  xlim(0, 105)\n\n\n\n\n\n\n\n\n\n\n\nüíÄ The ‚ÄúYikes‚Äù Award (Worst CO‚ÇÇ per Mile)\nYou thought Liberty City traffic was bad. These guys are worse. The top CO‚ÇÇ emitters per mile get a not-so-glamorous spot in our Hall of Shame.\n\n\nCode\nworst_agency_by_size &lt;- emissions_data |&gt; \n  filter(!is.na(CO2_per_MILE)) |&gt; \n  group_by(Agency_Size) |&gt; \n  arrange(desc(CO2_per_MILE)) |&gt; \n  slice(1) |&gt; \n  ungroup() |&gt; \n  select(Agency_Size, Agency, State, CO2_per_MILE)\n\ngta_kable_style(worst_agency_by_size, caption = \"üíÄ 'Yikes' Award ‚Äì Worst CO‚ÇÇ per Mile by Size\")\n\n\n\n\nüíÄ 'Yikes' Award ‚Äì Worst CO‚ÇÇ per Mile by Size\n\n\nAgency_Size\nAgency\nState\nCO2_per_MILE\n\n\n\n\nLarge\nWashington Metropolitan Area Transit Authority, dba: Washington Metro\nDC\n210.9544\n\n\nMedium\nAlternativa de Transporte Integrado , dba: Autoridad de Transporte Integrado\nPR\n297.5539\n\n\nSmall\nPennsylvania Department of Transportation\nPA\n124.2203\n\n\n\n\n\n\n\n\n\n\nCode\nworst_agency_by_size &lt;- emissions_data %&gt;%\n  filter(!is.na(CO2_per_MILE)) %&gt;%\n  group_by(Agency_Size) %&gt;%\n  arrange(desc(CO2_per_MILE)) %&gt;%\n  slice(1) %&gt;%\n  ungroup() %&gt;%\n  select(Agency_Size, Agency, State, CO2_per_MILE)\n\nworst_agency_by_size$CO2_per_MILE &lt;- worst_agency_by_size$CO2_per_MILE / max(worst_agency_by_size$CO2_per_MILE)\n\nif (!requireNamespace(\"fmsb\", quietly = TRUE)) install.packages(\"fmsb\")\nlibrary(fmsb)\n\nradar_data &lt;- as.data.frame(t(worst_agency_by_size$CO2_per_MILE / max(worst_agency_by_size$CO2_per_MILE)))\ncolnames(radar_data) &lt;- worst_agency_by_size$Agency_Size\nradar_data &lt;- rbind(rep(1, ncol(radar_data)), rep(0, ncol(radar_data)), radar_data)\n\nradarchart(\n  radar_data,\n  axistype = 1,\n  pcol = highlight_color, pfcol = rgb(1, 0, 0.8, 0.4), plwd = 4,\n  cglcol = accent_color, cglty = 1, axislabcol = \"white\", caxislabels = seq(0, 1, 0.2), cglwd = 1,\n  vlcex = 1.2,\n  title = \"üíÄ 'Yikes' Award ‚Äì Worst CO‚ÇÇ/Mile by Agency Size\"\n)"
  },
  {
    "objectID": "mp02.html#final-word-from-gta-iv-transit-bureau",
    "href": "mp02.html#final-word-from-gta-iv-transit-bureau",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üßæ Final Word from GTA IV Transit Bureau üóΩ",
    "text": "üßæ Final Word from GTA IV Transit Bureau üóΩ\nThese agencies showed us who‚Äôs really pulling their weight ‚Äî and who‚Äôs puffing more smoke than a busted Sabre GT.\n‚úÖ From clean miles to electric rides, we‚Äôve scraped, cleaned, calculated, and visualized the wild world of U.S. transit emissions.\nüî• If you‚Äôre not green, you‚Äôre just another red dot on the radar. Stay clean, Liberty City."
  },
  {
    "objectID": "mp02.html#clean-ride-royalty-the-greenest-transit-agencies-by-size",
    "href": "mp02.html#clean-ride-royalty-the-greenest-transit-agencies-by-size",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üèÖ Clean Ride Royalty ‚Äì The Greenest Transit Agencies by Size",
    "text": "üèÖ Clean Ride Royalty ‚Äì The Greenest Transit Agencies by Size\nForget horsepower ‚Äî this is about carbon-footprint finesse. These agencies prove you don‚Äôt need to burn rubber to move people. We crunched the emissions data, normalized it to CO‚ÇÇ per passenger mile, and crowned the cleanest of the clean:\n\n\n\n\n\n\n\n\n\nüè∑Ô∏è Size\nüöè Agency\nüìç State\nüåø CO‚ÇÇ per Mile (kg)\n\n\n\n\nLarge\nMTA New York City Transit\nNY\n0.000046\n\n\nMedium\nStark Area Regional Transit Authority\nOH\n0.000000\n\n\nSmall\nCity of Appleton, dba: Valley Transit\nWI\n0.000438\n\n\n\n\nüïäÔ∏è Stark Area Regional Transit Authority is so clean, we double-checked if they were teleporting people.\nüöá NYC‚Äôs MTA proves that even in a sprawling mega-metropolis, you can still keep it green.\nüßÄ Wisconsin‚Äôs Valley Transit? More eco than a farmers‚Äô market on a fixie."
  },
  {
    "objectID": "mp02.html#the-carbon-capos-most-emissions-avoided-by-transit-agencies",
    "href": "mp02.html#the-carbon-capos-most-emissions-avoided-by-transit-agencies",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üöóüí® The Carbon Capos ‚Äì Most Emissions Avoided by Transit Agencies",
    "text": "üöóüí® The Carbon Capos ‚Äì Most Emissions Avoided by Transit Agencies\nStep aside, Teslas. These agencies are saving the planet one busload at a time, dodging more carbon than a Liberty City getaway driver avoids traffic lights.\nWe estimated how much CO‚ÇÇ each agency avoided compared to if their passengers drove private cars (assuming 25 MPG and 19.6 lbs CO‚ÇÇ per gallon). Here are your MVPs ‚Äî Most Valuable Polluters‚Ä¶ Avoided:\n\n\n\n\n\n\n\n\n\nüè∑Ô∏è Size\nüöè Agency\nüìç State\nüí® CO‚ÇÇ Avoided (kg)\n\n\n\n\nLarge\nMTA New York City Transit\nNY\n7,519,101,389\n\n\nMedium\nMTA Long Island Rail Road\nNY\n1,435,350,705\n\n\nSmall\nHampton Jitney, Inc.\nNY\n28,931,084\n\n\n\n\nüóΩ New York sweep! The Empire State is practically smudging carbon off the map.\nüöå MTA NYC singlehandedly avoided more emissions than some countries emit.\nüß≥ Hampton Jitney said ‚Äúluxury bus‚Äù and luxury planet.\n\nüéØ Metric calculated as:\n\nEmissions avoided = (Transit miles √∑ 25 MPG) √ó 19.6 lbs CO‚ÇÇ ‚àí Transit CO‚ÇÇ emissions."
  },
  {
    "objectID": "mp02.html#electrification-excellence-the-battery-bosses",
    "href": "mp02.html#electrification-excellence-the-battery-bosses",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "‚ö° Electrification Excellence ‚Äì The Battery Bosses",
    "text": "‚ö° Electrification Excellence ‚Äì The Battery Bosses\nWhile some agencies are still guzzling gas like it‚Äôs 1999, these transit legends have gone full electric ‚Äî zapping emissions with the finesse of a Liberty City hacker on a subway heist.\nWe calculated each agency‚Äôs Electric Share of CO‚ÇÇ emissions ‚Äî the percentage of total emissions coming from electric-based fuel. And these winners? 100% electric. That‚Äôs right ‚Äî not a single puff of smoke.\n\n\n\n\n\n\n\n\n\nüè∑Ô∏è Size\nüöè Agency\nüìç State\n‚ö° Electric Share\n\n\n\n\nLarge\nMassachusetts Bay Transportation Authority\nMA\n100%\n\n\nMedium\nKing County, dba: King County Metro\nWA\n100%\n\n\nSmall\nCity of Wilsonville, dba: South Metro Area Regional Transit\nOR\n100%\n\n\n\n\nüîå They didn‚Äôt just ride the wave ‚Äî they charged it.\nüíØ Not 99%. Not ‚Äúwe‚Äôre working on it.‚Äù Straight-up 100% electric, baby.\nüß† While others are debating fuel blends, these agencies said ‚Äúoutlet or bust.‚Äù\n\nüéØ Metric calculated as:\n\nElectric Share = CO‚ÇÇ emissions from electric modes √∑ Total CO‚ÇÇ emissions\n\nüÜö Reference point: The median agency‚Äôs electric share? ~17%.\nThese awardees are basically driving a Tesla bus in the Matrix.\nData sources: FTA NTD Energy Data (2023), EIA Fuel Emission Factors"
  },
  {
    "objectID": "mp02.html#the-yikes-award-most-co‚ÇÇ-per-mile-by-size",
    "href": "mp02.html#the-yikes-award-most-co‚ÇÇ-per-mile-by-size",
    "title": "Grand Transit Awards: GTA IV Edition",
    "section": "üíÄ The ‚ÄúYikes‚Äù Award ‚Äì Most CO‚ÇÇ per Mile (By Size)",
    "text": "üíÄ The ‚ÄúYikes‚Äù Award ‚Äì Most CO‚ÇÇ per Mile (By Size)\nSome agencies shine like neon on a Liberty City taxi. Others‚Ä¶ well‚Ä¶ belch more CO‚ÇÇ than a broken-down Blista Compact doing donuts in Broker. These transit operations didn‚Äôt just miss the green bus ‚Äî they set it on fire on the way out. üî•üöå\nWe calculated each agency‚Äôs CO‚ÇÇ per mile to see who‚Äôs earning their carbon karma the hard way.\n\n\n\n\n\n\n\n\n\nüè∑Ô∏è Size\nüöè Agency\nüìç State\nüí® CO‚ÇÇ per Mile (kg)\n\n\n\n\nLarge\nWashington Metropolitan Area Transit Authority, dba: Washington Metro\nDC\n210.95\n\n\nMedium\nAlternativa de Transporte Integrado, dba: Autoridad de Transporte Integrado\nPR\n297.55\n\n\nSmall\nPennsylvania Department of Transportation\nPA\n124.22\n\n\n\n\nüõë Metric calculated as:\nCO‚ÇÇ per Mile = Total kg of emissions / Total passenger miles\n\nüìä Reference point? The median agency emitted ~1.08 kg per mile. These three are doing 100x that, like they mistook the transit depot for a drag strip.\n\nüßØ Dear operators: If you‚Äôre seeing this, we love you, but it might be time for a fleet intervention. Or at least, like, one electric scooter.\n\nüóûÔ∏è These agencies win a used catalytic converter and free tickets to the ‚Äúhow to electrify a fleet‚Äù workshop.\nData sources: FTA NTD Energy + Service Data (2023), EIA Fuel Emission Factors\nüíæ Mission Complete\nüèÅ Final Report from the Liberty City Transit Bureau\nüé§ The Final Word üñ§ Transit isn‚Äôt just about getting from Point A to B ‚Äî it‚Äôs about getting there cleaner, smarter, and cooler than ever before.\nFrom clean ride royalty to electrification titans, we‚Äôve ranked them all. üïπÔ∏è Powered by data, styled like GTA IV, and wrapped in hot pink & neon blue ‚Äî this wasn‚Äôt just an analysis. This was a climate side quest with a vengeance.\nüèÜ Awards Recap üíö Greenest Riders: MTA NYC & friends gliding past the carbon fog\nüîå Electrification Gods: 100% battery beasts that don‚Äôt even flinch\nüöóüí® Emissions Avengers: Saving more CO‚ÇÇ than your cousin‚Äôs pickup\nüíÄ The ‚ÄúYikes‚Äù Award: For those who‚Ä¶ really need to charge up üò¨\nüìä What We Actually Did: ‚úÖ Automated data scraping from EIA + NTD\n‚úÖ Calculated & normalized emissions across all agencies\n‚úÖ Designed GTA IV‚Äìthemed tables and plots\n‚úÖ Ranked transit leaders in four fierce climate categories\n‚úÖ Gave it enough chaotic good energy to land a Rockstar bonus üí£\nüìä Data sources:\n\nFTA NTD Energy Data (2023), EIA Fuel Emission Factors (https://www.eia.gov/environment/emissions/co2_vol_mass.php)\nThe image was sourced by Chat GPT, Which also helped me with background theme by creating a .css file"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Dhruv‚Äôs STA 9750 Website",
    "section": "",
    "text": "Last Updated: Thursday 03 27, 2025 at 11:36AM\n\n\n\n\n\n\nWelcome to My STA 9750 Project Page! üöÄ Hello, I‚Äôm Dhruv Sharma! üëã I am a data-driven thinker and a student at Baruch College, currently taking STA 9750. This site is my digital notebook for the course ‚Äî filled with projects, experiments, and insights in statistics and data science.\nWhat You‚Äôll Find Here üìÇ ‚úÖ üìä Mini-Projects ‚úÖ üìö Course Assignments ‚úÖ üìù Blog & Reflections ‚úÖ ‚ú® Additional Learning Materials\nSkills & Tools I‚Äôm Using üõ†Ô∏è R, Quarto, tidyverse, ggplot2\nHypothesis Testing & Inference\nGit & GitHub\nData Cleaning, Visualization, and Communication\nA Fun Fact About Me üéâ When I‚Äôm not exploring data, I enjoy gaming, design, and keeping up with tech. I‚Äôm passionate about using data to tell stories that matter.\nConnect With Me üåê üè† GitHub: Dhruvhw-10\nüìß Email: d619sharma@gmail.com\n‚ÄúData is the new oil, but insights are the fuel that drive the world forward.‚Äù ‚Äì Anonymous"
  },
  {
    "objectID": "mp01.html",
    "href": "mp01.html",
    "title": "NYC Payroll Data Analysis",
    "section": "",
    "text": "This report analyzes NYC Payroll Data, examining financial trends and evaluating three policy proposals to optimize payroll expenditures. The analysis includes real-world comparisons, think tank citations, and feasibility assessments.\n\n\n‚úÖ Identify trends in salaries, overtime, and payroll growth.\n‚úÖ Compare results with external reports.\n‚úÖ Assess the feasibility of three policy proposals to reduce payroll costs."
  },
  {
    "objectID": "mp01.html#objectives",
    "href": "mp01.html#objectives",
    "title": "NYC Payroll Data Analysis",
    "section": "",
    "text": "‚úÖ Identify trends in salaries, overtime, and payroll growth.\n‚úÖ Compare results with external reports.\n‚úÖ Assess the feasibility of three policy proposals to reduce payroll costs."
  },
  {
    "objectID": "mp01.html#load-and-clean-data",
    "href": "mp01.html#load-and-clean-data",
    "title": "NYC Payroll Data Analysis",
    "section": "2.1 ** Load and Clean Data**",
    "text": "2.1 ** Load and Clean Data**\n\n\nCode\nlibrary(readr)\nlibrary(dplyr)\nlibrary(stringr)\nlibrary(DT)\nlibrary(gt)\nlibrary(ggplot2)\nlibrary(scales)\n\npayroll_data &lt;- read_csv(\"data/mp01/nyc_payroll_export.csv\")\ncolnames(payroll_data)\n\n\n [1] \"fiscal_year\"                \"payroll_number\"            \n [3] \"agency_name\"                \"last_name\"                 \n [5] \"first_name\"                 \"mid_init\"                  \n [7] \"agency_start_date\"          \"work_location_borough\"     \n [9] \"title_description\"          \"leave_status_as_of_june_30\"\n[11] \"base_salary\"                \"pay_basis\"                 \n[13] \"regular_hours\"              \"regular_gross_paid\"        \n[15] \"ot_hours\"                   \"total_ot_paid\"             \n[17] \"total_other_pay\"           \n\n\nCode\npayroll_data &lt;- payroll_data %&gt;%\n  mutate(\n    agency_name = str_to_title(agency_name),\n    last_name = str_to_title(last_name),\n    first_name = str_to_title(first_name),\n    work_location_borough = str_to_title(work_location_borough),\n    title_description = str_to_title(title_description),\n    leave_status = str_to_title(leave_status_as_of_june_30)\n  )\ncolnames(payroll_data)\n\n\n [1] \"fiscal_year\"                \"payroll_number\"            \n [3] \"agency_name\"                \"last_name\"                 \n [5] \"first_name\"                 \"mid_init\"                  \n [7] \"agency_start_date\"          \"work_location_borough\"     \n [9] \"title_description\"          \"leave_status_as_of_june_30\"\n[11] \"base_salary\"                \"pay_basis\"                 \n[13] \"regular_hours\"              \"regular_gross_paid\"        \n[15] \"ot_hours\"                   \"total_ot_paid\"             \n[17] \"total_other_pay\"            \"leave_status\"              \n\n\nCode\npayroll_data &lt;- payroll_data %&gt;%\n  rename(\n    fiscal_year = `fiscal_year`,\n    agency_name = `agency_name`,\n    last_name = `last_name`,\n    first_name = `first_name`,\n    title = `title_description`,\n    salary = `base_salary`,\n    pay_basis = `pay_basis`,\n    reg_hours = `regular_hours`,\n    borough = `work_location_borough`\n  )\npayroll_data &lt;- payroll_data %&gt;%\n  mutate(salary = as.numeric(salary),\n         reg_hours = as.numeric(reg_hours),\n         ot_hours = as.numeric(ot_hours))\nglimpse(payroll_data)\n\n\nRows: 6,225,611\nColumns: 18\n$ fiscal_year                &lt;dbl&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2‚Ä¶\n$ payroll_number             &lt;dbl&gt; 67, 67, 67, 67, 67, 67, 67, 67, 67, 67, 67,‚Ä¶\n$ agency_name                &lt;chr&gt; \"Admin For Children's Svcs\", \"Admin For Chi‚Ä¶\n$ last_name                  &lt;chr&gt; \"Faye Fall\", \"Kilgore\", \"Wisdom\", \"Miller\",‚Ä¶\n$ first_name                 &lt;chr&gt; \"Sokhna\", \"Orlantha\", \"Cherise\", \"Moya-Gaye‚Ä¶\n$ mid_init                   &lt;chr&gt; \"M\", \"B\", \"M\", \"S\", \"M\", \"L\", \"O\", NA, \"N\",‚Ä¶\n$ agency_start_date          &lt;dttm&gt; 2023-11-20, 2023-08-28, 2022-10-24, 2023-0‚Ä¶\n$ borough                    &lt;chr&gt; \"Bronx\", \"Brooklyn\", \"Manhattan\", \"Manhatta‚Ä¶\n$ title                      &lt;chr&gt; \"Child Protective Specialist\", \"Child Prote‚Ä¶\n$ leave_status_as_of_june_30 &lt;chr&gt; \"ACTIVE\", \"ACTIVE\", \"ON LEAVE\", \"ON LEAVE\",‚Ä¶\n$ salary                     &lt;dbl&gt; 62043, 62043, 43144, 62043, 60236, 62043, 6‚Ä¶\n$ pay_basis                  &lt;chr&gt; \"per Annum\", \"per Annum\", \"per Annum\", \"per‚Ä¶\n$ reg_hours                  &lt;dbl&gt; 1050.00, 1470.00, 1251.50, 1400.75, 700.00,‚Ä¶\n$ regular_gross_paid         &lt;dbl&gt; 31267.96, 44660.96, 28649.20, 44515.43, 221‚Ä¶\n$ ot_hours                   &lt;dbl&gt; 12.00, 99.75, 30.00, 44.75, 53.00, 146.00, ‚Ä¶\n$ total_ot_paid              &lt;dbl&gt; 425.00, 3859.84, 802.42, 1476.98, 1933.33, ‚Ä¶\n$ total_other_pay            &lt;dbl&gt; 78.04, 78.14, 78.26, 78.37, 78.47, 78.86, 7‚Ä¶\n$ leave_status               &lt;chr&gt; \"Active\", \"Active\", \"On Leave\", \"On Leave\",‚Ä¶"
  },
  {
    "objectID": "mp01.html#mayor-eric-adams-salary",
    "href": "mp01.html#mayor-eric-adams-salary",
    "title": "NYC Payroll Data Analysis",
    "section": "3.1 Mayor Eric Adams‚Äô Salary",
    "text": "3.1 Mayor Eric Adams‚Äô Salary\n\n\nCode\nmayor_data &lt;- payroll_data %&gt;%\n  filter(str_detect(`first_name`, \"Eric\") & str_detect(`last_name`, \"Adams\")) %&gt;%\n  select(`fiscal_year`, `title`, `agency_name`, `salary`) %&gt;%\n  arrange(`fiscal_year`)\nmayor_data %&gt;%\n  mutate(`salary` = dollar(`salary`)) %&gt;%\n  datatable(options = list(\n    searching = FALSE,\n    paging = FALSE,\n    info = FALSE\n  ))"
  },
  {
    "objectID": "mp01.html#total-compensation-calculation",
    "href": "mp01.html#total-compensation-calculation",
    "title": "NYC Payroll Data Analysis",
    "section": "3.2 üí∞ Total Compensation Calculation",
    "text": "3.2 üí∞ Total Compensation Calculation\nTo calculate total compensation, we consider different pay structures:\n\nAnnual Salary ‚Üí Directly assigned\nHourly Employees ‚Üí (Hourly Rate * Regular Hours) + (1.5 * Hourly Rate * Overtime Hours)\nDaily Employees ‚Üí (Daily Rate * (Regular Hours / 7.5))\n\n\n\nCode\npayroll_data &lt;- payroll_data %&gt;%\n  mutate(\n    total_compensation = case_when(\n      `pay_basis` == \"per Annum\" ~ `salary`,\n      `pay_basis` == \"per Hour\" ~ `salary` * `reg_hours` + (`salary` * 1.5 * `ot_hours`),\n      `pay_basis` == \"per Day\" ~ `salary` * (`reg_hours` / 7.5),\n      TRUE ~ `salary`\n    )\n  )\ndatatable(\n  payroll_data %&gt;%\n    select(first_name, last_name, agency_name, title, pay_basis, salary, reg_hours, ot_hours, total_compensation) %&gt;%\n    arrange(desc(total_compensation)) %&gt;%\n    slice_head(n = 10),\n  options = list(scrollX = TRUE)\n)"
  },
  {
    "objectID": "mp01.html#highest-base-salary-job-title",
    "href": "mp01.html#highest-base-salary-job-title",
    "title": "NYC Payroll Data Analysis",
    "section": "4.1 ** Highest Base Salary Job Title**",
    "text": "4.1 ** Highest Base Salary Job Title**\n\n\nCode\nhighest_paid_job &lt;- payroll_data %&gt;%\n  filter(pay_basis == \"per Annum\") %&gt;%\n  mutate(hourly_rate = salary / 2000) %&gt;%\n  arrange(desc(hourly_rate)) %&gt;%\n  select(title, agency_name, salary, hourly_rate) %&gt;%\n  slice(1)\n\nprint(highest_paid_job)\n\n\n# A tibble: 1 √ó 4\n  title agency_name           salary hourly_rate\n  &lt;chr&gt; &lt;chr&gt;                  &lt;dbl&gt;       &lt;dbl&gt;\n1 Chair Nyc Housing Authority 414707        207.\n\n\nüìå Insight: Employees in executive positions tend to have the highest base salaries. External reports confirm that high salaries are a budget concern."
  },
  {
    "objectID": "mp01.html#highest-earning-employee",
    "href": "mp01.html#highest-earning-employee",
    "title": "NYC Payroll Data Analysis",
    "section": "4.2 ** Highest Earning Employee**",
    "text": "4.2 ** Highest Earning Employee**\nThe highest-earning employee based on total compensation.\n\n\nCode\nhighest_earning_employee &lt;- payroll_data %&gt;%\n  mutate(total_compensation = salary + total_ot_paid + total_other_pay) %&gt;%\n  arrange(desc(total_compensation)) %&gt;%\n  select(fiscal_year, first_name, last_name, title, agency_name, total_compensation) %&gt;%\n  slice(1)\n\nprint(highest_earning_employee)\n\n\n# A tibble: 1 √ó 6\n  fiscal_year first_name last_name title          agency_name total_compensation\n        &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;          &lt;chr&gt;                    &lt;dbl&gt;\n1        2024 Mark       Tettonis  Chief Marine ‚Ä¶ Department‚Ä¶           1382854.\n\n\nüìå Insight: Some employees earn significantly more than their base salary due to overtime and other pay."
  },
  {
    "objectID": "mp01.html#most-overtime-hours-worked",
    "href": "mp01.html#most-overtime-hours-worked",
    "title": "NYC Payroll Data Analysis",
    "section": "4.3 ** Most Overtime Hours Worked**",
    "text": "4.3 ** Most Overtime Hours Worked**\nIdentifies the employee who has worked the most overtime hours.\n\n\nCode\nmost_overtime_employee &lt;- payroll_data %&gt;%\n  arrange(desc(ot_hours)) %&gt;%\n  select(fiscal_year, first_name, last_name, title, agency_name, ot_hours) %&gt;%\n  slice(1)\n\nprint(most_overtime_employee)\n\n\n# A tibble: 1 √ó 6\n  fiscal_year first_name last_name   title              agency_name     ot_hours\n        &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;              &lt;chr&gt;              &lt;dbl&gt;\n1        2022 James      Internicola Correction Officer Department Of ‚Ä¶    3693."
  },
  {
    "objectID": "mp01.html#agency-with-highest-average-payroll",
    "href": "mp01.html#agency-with-highest-average-payroll",
    "title": "NYC Payroll Data Analysis",
    "section": "4.4 ** Agency with Highest Average Payroll**",
    "text": "4.4 ** Agency with Highest Average Payroll**\nThe agency with the highest average payroll per employee.\n\n\nCode\nhighest_avg_payroll_agency &lt;- payroll_data %&gt;%\n  group_by(agency_name) %&gt;%\n  summarise(avg_payroll = mean(salary + total_ot_paid + total_other_pay, na.rm = TRUE)) %&gt;%\n  arrange(desc(avg_payroll)) %&gt;%\n  slice(1)\n\nprint(highest_avg_payroll_agency)\n\n\n# A tibble: 1 √ó 2\n  agency_name             avg_payroll\n  &lt;chr&gt;                         &lt;dbl&gt;\n1 Office Of Racial Equity     153102.\n\n\nüìå Insight: Some specialized agencies pay significantly more than others due to expertise requirements."
  },
  {
    "objectID": "mp01.html#agency-with-most-employees-per-year",
    "href": "mp01.html#agency-with-most-employees-per-year",
    "title": "NYC Payroll Data Analysis",
    "section": "4.5 ** Agency with Most Employees Per Year**",
    "text": "4.5 ** Agency with Most Employees Per Year**\nThe agency employing the most people in a given year.\n\n\nCode\nmost_employees_agency &lt;- payroll_data %&gt;%\n  group_by(fiscal_year, agency_name) %&gt;%\n  summarise(employee_count = n()) %&gt;%\n  arrange(fiscal_year, desc(employee_count)) %&gt;%\n  slice(1)\n\n\n`summarise()` has grouped output by 'fiscal_year'. You can override using the\n`.groups` argument.\n\n\nCode\nprint(most_employees_agency)\n\n\n# A tibble: 11 √ó 3\n# Groups:   fiscal_year [11]\n   fiscal_year agency_name            employee_count\n         &lt;dbl&gt; &lt;chr&gt;                           &lt;int&gt;\n 1        2014 Dept Of Ed Pedagogical         100589\n 2        2015 Dept Of Ed Pedagogical         111857\n 3        2016 Dept Of Ed Pedagogical         106263\n 4        2017 Dept Of Ed Pedagogical         104629\n 5        2018 Dept Of Ed Pedagogical         107956\n 6        2019 Dept Of Ed Pedagogical         112067\n 7        2020 Dept Of Ed Pedagogical         114999\n 8        2021 Dept Of Ed Pedagogical         113523\n 9        2022 Dept Of Ed Pedagogical         120453\n10        2023 Dept Of Ed Pedagogical         106882\n11        2024 Dept Of Ed Pedagogical         108209\n\n\nüìå Insight: The NYPD and Department of Education tend to have the largest workforces."
  },
  {
    "objectID": "mp01.html#agency-with-highest-overtime-usage",
    "href": "mp01.html#agency-with-highest-overtime-usage",
    "title": "NYC Payroll Data Analysis",
    "section": "4.6 ** Agency with Highest Overtime Usage**",
    "text": "4.6 ** Agency with Highest Overtime Usage**\nThe agency with the highest overtime usage relative to regular hours.\n\n\nCode\nhighest_overtime_agency &lt;- payroll_data %&gt;%\n  group_by(agency_name) %&gt;%\n  summarise(\n    total_ot_hours = sum(ot_hours, na.rm = TRUE),\n    total_reg_hours = sum(reg_hours, na.rm = TRUE),\n    ot_ratio = total_ot_hours / total_reg_hours\n  ) %&gt;%\n  arrange(desc(ot_ratio)) %&gt;%\n  slice(1)\n\nprint(highest_overtime_agency)\n\n\n# A tibble: 1 √ó 4\n  agency_name       total_ot_hours total_reg_hours ot_ratio\n  &lt;chr&gt;                      &lt;dbl&gt;           &lt;dbl&gt;    &lt;dbl&gt;\n1 Board Of Election       3062029.       15339960.    0.200\n\n\nüìå Insight: Some agencies rely heavily on overtime rather than hiring more employees."
  },
  {
    "objectID": "mp01.html#average-salary-of-employees-outside-nyc",
    "href": "mp01.html#average-salary-of-employees-outside-nyc",
    "title": "NYC Payroll Data Analysis",
    "section": "4.7 ** Average Salary of Employees Outside NYC**",
    "text": "4.7 ** Average Salary of Employees Outside NYC**\nThe average salary of employees working outside the five boroughs.\n\n\nCode\noutside_five_boroughs_salary &lt;- payroll_data %&gt;%\n  filter(!borough %in% c(\"Bronx\", \"Brooklyn\", \"Manhattan\", \"Queens\", \"Staten Island\")) %&gt;%\n  summarise(avg_salary = mean(salary, na.rm = TRUE))\n\nprint(outside_five_boroughs_salary)\n\n\n# A tibble: 1 √ó 1\n  avg_salary\n       &lt;dbl&gt;\n1     53735.\n\n\nüìå Insight: Employees working outside NYC may have different pay structures."
  },
  {
    "objectID": "mp01.html#nyc-payroll-growth-over-10-years",
    "href": "mp01.html#nyc-payroll-growth-over-10-years",
    "title": "NYC Payroll Data Analysis",
    "section": "4.8 ** NYC Payroll Growth Over 10 Years**",
    "text": "4.8 ** NYC Payroll Growth Over 10 Years**\nTracking total payroll growth.\n\n\nCode\npayroll_growth &lt;- payroll_data %&gt;%\n  group_by(fiscal_year) %&gt;%\n  summarise(total_payroll = sum(salary + total_ot_paid + total_other_pay, na.rm = TRUE)) %&gt;%\n  arrange(fiscal_year)\n\nprint(payroll_growth)\n\n\n# A tibble: 11 √ó 2\n   fiscal_year total_payroll\n         &lt;dbl&gt;         &lt;dbl&gt;\n 1        2014  22638474550.\n 2        2015  25474766615.\n 3        2016  26544770463.\n 4        2017  27258714065.\n 5        2018  27965852639.\n 6        2019  29501782601.\n 7        2020  31981635725.\n 8        2021  31330019031.\n 9        2022  34887228899.\n10        2023  33319364876.\n11        2024  34700020886.\n\n\nCode\ndatatable(payroll_growth, options = list(pageLength = 5))\n\n\n\n\n\n\nCode\nggplot(payroll_growth, aes(x = fiscal_year, y = total_payroll)) +\n  geom_line() +\n  geom_point() +\n  scale_y_continuous(labels = scales::dollar_format()) +\n  labs(title = \"NYC Aggregate Payroll Growth Over 10 Years\",\n       x = \"Fiscal Year\",\n       y = \"Total Payroll ($)\") +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nüìå Insight: NYC‚Äôs payroll costs have steadily increased over the last decade."
  },
  {
    "objectID": "mp01.html#policy-1-cap-high-salaries",
    "href": "mp01.html#policy-1-cap-high-salaries",
    "title": "NYC Payroll Data Analysis",
    "section": "5.1 Policy 1: Cap High Salaries",
    "text": "5.1 Policy 1: Cap High Salaries\nSome employees earn more than the Mayor‚Äôs salary. This policy aims to cap high earnings.\n\n\nCode\nmayor_salary &lt;- payroll_data %&gt;%\n  filter(title == \"Mayor\") %&gt;%\n  select(fiscal_year, total_compensation)\nhigh_salaries &lt;- payroll_data %&gt;%\n  inner_join(mayor_salary, by = \"fiscal_year\", suffix = c(\"_emp\", \"_mayor\")) %&gt;%\n  filter(total_compensation_emp &gt; total_compensation_mayor)\n\n\nWarning in inner_join(., mayor_salary, by = \"fiscal_year\", suffix = c(\"_emp\", : Detected an unexpected many-to-many relationship between `x` and `y`.\n‚Ñπ Row 17197 of `x` matches multiple rows in `y`.\n‚Ñπ Row 1 of `y` matches multiple rows in `x`.\n‚Ñπ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning.\n\n\nCode\ntotal_savings &lt;- sum(high_salaries$total_compensation_emp - high_salaries$total_compensation_mayor, na.rm = TRUE)\ndatatable(\n  high_salaries %&gt;%\n    select(fiscal_year, first_name, last_name, title, agency_name, total_compensation_emp, total_compensation_mayor) %&gt;%\n    slice_head(n = 100),\n  options = list(scrollX = TRUE)\n)\n\n\n\n\n\n\n\n5.1.1 üí° Outcome:\n\nPotential savings if salaries above the Mayor‚Äôs pay are limited.\n\nüìå Political Feasibility: Moderate üü†\n‚úî Saves millions but faces opposition from high earners and unions."
  },
  {
    "objectID": "mp01.html#policy-2-hire-more-staff-to-reduce-overtime",
    "href": "mp01.html#policy-2-hire-more-staff-to-reduce-overtime",
    "title": "NYC Payroll Data Analysis",
    "section": "5.2 Policy 2: Hire More Staff to Reduce Overtime",
    "text": "5.2 Policy 2: Hire More Staff to Reduce Overtime\nExcessive overtime costs 1.5x regular wages. Instead, hiring more employees can reduce payroll expenses.\n\n5.2.1 ** Overtime Reduction Analysis**\nObjective: Identify how many full-time employees (FTEs) would be needed to replace current overtime hours.\n\n\nCode\novertime_reduction &lt;- payroll_data %&gt;%\n  group_by(agency_name, title) %&gt;%\n  summarize(\n    total_overtime_hours = sum(ot_hours, na.rm = TRUE),\n    full_time_equivalent_needed = total_overtime_hours / 2000\n  ) %&gt;%\n  arrange(desc(total_overtime_hours))\n\n\n`summarise()` has grouped output by 'agency_name'. You can override using the\n`.groups` argument.\n\n\nCode\ndatatable(overtime_reduction, options = list(scrollX = TRUE))\n\n\n\n\n\n\nüìå Insight: Agencies with high overtime hours may benefit from hiring additional staff instead of relying on overtime.\n\n\n5.2.2 ** Overtime Cost vs.¬†Regular Cost Savings**\nObjective: Calculate the cost difference between overtime pay and regular pay.\n\n\nCode\novertime_savings &lt;- payroll_data %&gt;%\n  group_by(agency_name, title) %&gt;%\n  summarize(\n    overtime_cost = sum(1.5 * salary * ot_hours, na.rm = TRUE),\n    regular_cost = sum(salary * (ot_hours / 40), na.rm = TRUE),\n    potential_savings = overtime_cost - regular_cost\n  ) %&gt;%\n  arrange(desc(potential_savings))\n\n\n`summarise()` has grouped output by 'agency_name'. You can override using the\n`.groups` argument.\n\n\nCode\ndatatable(overtime_savings, options = list(scrollX = TRUE))\n\n\n\n\n\n\nüìå Insight: Agencies paying excessive overtime could save significantly by hiring regular staff instead.\n\n\n5.2.3 ** Agency-Level Savings Calculation**\nObjective: Aggregate savings at the agency level to determine the most cost-effective changes.\n\n\nCode\nagency_savings &lt;- overtime_savings %&gt;%\n  group_by(agency_name) %&gt;%\n  summarize(\n    total_overtime_cost = sum(overtime_cost, na.rm = TRUE),\n    total_regular_cost = sum(regular_cost, na.rm = TRUE),\n    total_savings = sum(potential_savings, na.rm = TRUE)\n  ) %&gt;%\n  arrange(desc(total_savings))\n\ndatatable(agency_savings, options = list(scrollX = TRUE))\n\n\n\n\n\n\nüìå Insight: This helps policymakers prioritize agencies where switching from overtime to regular staffing would have the largest financial impact.\nüìå Political Feasibility: High ‚úÖ\n‚úî Reduces costs, improves work-life balance.\n‚úñ Requires initial hiring costs."
  },
  {
    "objectID": "mp01.html#policy-3-reducing-non-essential-overtime-expanding-remote-work",
    "href": "mp01.html#policy-3-reducing-non-essential-overtime-expanding-remote-work",
    "title": "NYC Payroll Data Analysis",
    "section": "5.3 Policy 3: Reducing Non-Essential Overtime & Expanding Remote Work",
    "text": "5.3 Policy 3: Reducing Non-Essential Overtime & Expanding Remote Work"
  },
  {
    "objectID": "mp01.html#overview",
    "href": "mp01.html#overview",
    "title": "NYC Payroll Data Analysis",
    "section": "5.4 üìå Overview",
    "text": "5.4 üìå Overview\nThis policy explores strategies to reduce unnecessary overtime expenses and evaluate remote work opportunities.\nThe analysis consists of three parts:\n1Ô∏è‚É£ Identifying Non-Essential Overtime & Potential Savings\n2Ô∏è‚É£ Assessing Remote Work Eligibility\n3Ô∏è‚É£ Estimating New Hires Needed to Replace Overtime Hours\n\n5.4.1 ** Identifying Non-Essential Overtime & Potential Savings**\nObjective: Reduce overtime in administrative and support roles where excess hours are unnecessary.\n\n\nCode\nnon_essential_overtime &lt;- payroll_data %&gt;%\n  filter(title %in% c(\"Administrative Assistant\", \"Clerk\", \"Analyst\", \"IT Support\")) %&gt;%\n  group_by(agency_name, title) %&gt;%\n  summarize(\n    total_overtime_hours = sum(ot_hours, na.rm = TRUE),\n    overtime_cost = sum(1.5 * salary * ot_hours, na.rm = TRUE),\n    potential_savings = overtime_cost * 0.50\n  ) %&gt;%\n  arrange(desc(potential_savings))\n\n\n`summarise()` has grouped output by 'agency_name'. You can override using the\n`.groups` argument.\n\n\nCode\ndatatable(non_essential_overtime, options = list(scrollX = TRUE))\n\n\n\n\n\n\nüìå Insight:\nAdministrative and clerical jobs could cut overtime costs by half, saving millions in payroll expenses.\n\n\n5.4.2 ** Remote Work Eligibility**\nObjective: Determine how many employees work in remote-eligible job titles.\n\n\nCode\nremote_eligible &lt;- payroll_data %&gt;%\n  filter(title %in% c(\"IT Support\", \"Data Analyst\", \"Project Manager\", \"Accountant\")) %&gt;%\n  group_by(agency_name, title) %&gt;%\n  summarize(avg_salary = mean(salary, na.rm = TRUE), employees = n())\n\n\n`summarise()` has grouped output by 'agency_name'. You can override using the\n`.groups` argument.\n\n\nCode\ndatatable(remote_eligible, options = list(scrollX = TRUE))\n\n\n\n\n\n\nüìå Insight:\nEncouraging remote work for data-heavy and administrative roles reduces office space costs and lowers commute-driven overtime claims.\n\n\n5.4.3 ** Hiring New Employees to Replace Overtime Dependency**\nObjective: Identify how many full-time employees would be needed to replace existing overtime hours.\n\n\nCode\nnew_hires_needed &lt;- non_essential_overtime %&gt;%\n  mutate(full_time_equivalent_needed = total_overtime_hours / 2000)\ndatatable(new_hires_needed, options = list(scrollX = TRUE))\n\n\n\n\n\n\nüìå Insight:\nInstead of paying costly overtime, hiring additional full-time employees would reduce long-term payroll costs while improving work-life balance.\nüìä Final Recommendations:\n‚úî Reduce overtime in non-essential roles like Clerks & Admin Assistants‚Äî50% reduction could save millions.\n‚úî Expand remote work for IT, Analysts, and Project Managers to reduce office space and commute-driven overtime.\n‚úî Hire full-time employees to replace reliance on overtime in high-workload agencies."
  }
]